<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 TransitiONal//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="refresh" content="3600" />
 
    <meta http-equiv="Content-Type" content="text/html, charset=utf-8,width=device-width, initial-scale=1.0" name="viewport" />
    <title>数据页面</title>
    <script typet="text/javascript" src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #fontzoom {
            width: 100%;
            overflow: hidden;
        }

        .table {
            text-align: center;
        }

            .table img {
                width: auto;
                height: 8%;
            }

            .table table {
                font-size: 70px;
                border-collapse: collapse;
                width: 90%;
                table-layout: fixed;
                text-align: center;
                line-height: 100px;
                margin: 0 auto;
            }

                .table table tr {
                    border: dashed 1px #a59e9e;
                    border-left: none;
                    border-right: none;
                }

        .box1 img {
            width: 200%;
            height: 20%;
        }

        .box2 img {
            width: 60%;
            height: 20%;
        }
    </style>
    <script>
        function $(id) {
            return document.getElementById(id);
        }
        function autoResizepic() {
            var bodywidth = $('fontzoom').style.width;
            bodywidth = document.body.scrollWidth
            var picTarget = $('fontzoom').getElementsByTagName('img');

            if (picTarget.length > 0) {
                for (var i = 0; i < picTarget.length; i++) {
                    if (picTarget[i].width > bodywidth) { picTarget[i].width = bodywidth - 0.1; }
                    if (picTarget[i].width < bodywidth) { picTarget[i].width = bodywidth - 0.1; }
                }
            }
        }
        window.onresize = autoResizepic;
    </script>
</head>
<body style="overflow-y: hidden">
         <div style="position:absolute; z-index:100; left:1100px; top:190px"><img src="https://s1.ax1x.com/2020/06/29/Nf3gMT.png" height="195" width="400"/></div>
         <div id="fontzoom">
             <img id="img" src="https://s1.ax1x.com/2020/06/18/NmKfz9.jpg" />
             <div style="position:absolute; z-index:100; left:1400px; top:200px;font-size:110px">飞鹰班组数据监控中心</div>
             <div id="d1" style="position:absolute; z-index:100; left:1110px; top:350px;font-size:70px"></div>
             <div id="d2" style="position:absolute; z-index:100; left:1800px; top:350px;font-size:70px"></div>
             <div id="d11" style="position:absolute; z-index:100; left:2300px; top:350px;font-size:70px"></div>
             <div style="position:absolute; z-index:100; left:900px; top:510px;font-size:90px">航站区水压监控</div>
             <div style="position:absolute; z-index:100; left:2700px; top:510px;font-size:90px">消防车库温湿度监控</div>
             <div class="box1" style="position:absolute; z-index:100; left:300px; top:750px;font-size:90px"><a href="file:///C:/Users/Administrator/Desktop/航站楼一楼.html"><img src="https://s1.ax1x.com/2020/07/10/UKJiCT.png" /></a></div>
             <div id="d5" style="position:absolute; z-index:100; left:800px; top:700px;font-size:70px;color:green"></div>
             <div id="d6" style="position:absolute; z-index:100; left:800px; top:820px;font-size:70px;color:green"></div>
             <div id="d7" style="position:absolute; z-index:100; left:800px; top:940px;font-size:70px;color:green"></div>
             <div class="box1" style="position:absolute; z-index:100; left:300px; top:1100px;font-size:90px"><img src="https://s1.ax1x.com/2020/07/10/UKU7p6.png" /></div>
             <div id="d8" style="position:absolute; z-index:100; left:800px; top:1100px;font-size:60px;color:green"></div>
             <div id="d12" style="position:absolute; z-index:100; left:1700px; top:1100px;font-size:60px;color:green"></div>
             <div id="d9" style="position:absolute; z-index:100; left:800px; top:1220px;font-size:60px;color:green"></div>
             <div id="d13" style="position:absolute; z-index:100; left:1700px; top:1220px;font-size:60px;color:green"></div>
             <div id="d14" style="position:absolute; z-index:100; left:800px; top:1340px;font-size:60px;color:green"></div>
             <div class="box1" style="position:absolute; z-index:100; left:300px; top:1530px;font-size:90px"><img src="https://s1.ax1x.com/2020/07/10/UKcISJ.png" /></div>
             <div id="d15" style="position:absolute; z-index:100; left:800px; top:1700px;font-size:90px;color:green"></div>
             <div class="box2" style="position:absolute; z-index:100; left:2800px; top:800px;font-size:90px"><img src="https://s1.ax1x.com/2020/07/10/UKR2wt.png" /></div>
             <div id="d3" style="position:absolute; z-index:100; left:2800px; top:1450px;font-size:90px;color:green"></div>
             <div id="d4" style="position:absolute; z-index:100; left:2800px; top:1630px;font-size:90px;color:green"></div>
         </div>
             </divstyle="position:absolute;>
             <div>
                 <script>
                     autoResizepic();
                     var d = new Date();
                     var year = d.getFullYear();
                     var month = d.getMonth() + 1; // 记得当前月是要+1的
                     var dt = d.getDate();
                     if (month >= 1 && month <= 9) {
                         month = "0" + month;
                     }
                     if (dt >= 0 && dt <= 9) {
                         dt = "0" + dt;
                     }
                     var today = year + "-" + month + "-" + dt;
                     console.log(today);
                     var fangfa = new Array("getDayPressure", "getDayTemperature", "getDayHumidity")
                     var riqi = today;
                     var id = new Array("34022175", "34989437", "34022142", "34022126", "50837266", "50837282", "34989296", "34022134", "50836953", "34019841", "34019817","34019478")
                     var data0 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[0]
                         })
                     }
                     var data1 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[1]
                         })
                     }
                     var data2 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[2]
                         })
                     }
                     var data3 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[3]
                         })
                     }
                     var data4 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[4]
                         })
                     }
                     var data5 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[5]
                         })
                     }
                     var data6 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[6]
                         })
                     }
                     var data7 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[7]
                         })
                     }
                     var data8 = {
                         data: JSON.stringify({
                             "methods": fangfa[0],
                             "cs1": riqi,
                             "cs2": id[8]
                         })
                     }
                     var data9 = {
                         data: JSON.stringify({
                             "methods": fangfa[1],
                             "cs1": riqi,
                             "cs2": id[9]
                         })
                     }
                     var data10 = {
                         data: JSON.stringify({
                             "methods": fangfa[2],
                             "cs1": riqi,
                             "cs2": id[10]
                         })
                     }
                     var data11 = {
                         data: JSON.stringify({
                             "methods": fangfa[1],
                             "cs1": riqi,
                             "cs2": id[11]
                         })
                     }
                     var data12 = {
                         data: JSON.stringify({
                             "methods": fangfa[2],
                             "cs1": riqi,
                             "cs2": id[11]
                         })
                     }

                   
                     //水泡水压
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data0,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);
                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)
                             var data1 = "水泡泵压:" + val + "Mpa";
                             document.getElementById("d5").innerHTML = data1;
                             document.getElementById("d5").onclick = function () {
                                 window.open("http://btjczhxf.top/1F");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d5");//颜色判断
                                 color.style.color = "red";//颜色判断
                             }
                         }
                     });
                     //车库温度
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         //data: data9,
                         data: data11,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.temperature + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);
                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)
                             // val = 0.1;
                             var wendu = "车库温度:" + val + "℃";
                             document.getElementById("d3").innerHTML = wendu;
                             document.getElementById("d3").onclick = function () {
                                 window.open("http://btjczhxf.top/CK");
                             };
                             if (val > 30) {
                                 var color = document.getElementById("d3");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("车库温度异常！");
                             }
                         }
                     });
                     //车库湿度
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         //data: data10,
                         data: data12,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.wet + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)

                             var cheku = "车库湿度:" + val + "%";
                             document.getElementById("d4").innerHTML = cheku;
                             document.getElementById("d4").onclick = function () {
                                 window.open("http://btjczhxf.top/CK");
                             };

                         }
                     });
                     //消防栓泵压
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data1,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)

                             var data2 = "消防栓泵压:" + val + "Mpa";
                             document.getElementById("d6").innerHTML = data2;
                             document.getElementById("d6").onclick = function () {
                                 window.open("http://btjczhxf.top/BF");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d6");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("消防栓泵压异常！");
                             }
                         }
                     });
                     //喷淋泵压
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data2,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)


                             var data3 = "喷淋泵压:" + val + "Mpa";
                             document.getElementById("d7").innerHTML = data3;
                             document.getElementById("d7").onclick = function () {
                                 window.open("http://btjczhxf.top/BF");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d7");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("喷淋泵压异常！");
                             }

                         }
                     });
                     //3号廊桥压力
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data3,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)


                             var data4 = "3号廊桥喷淋压力:" + val + "Mpa";
                             document.getElementById("d8").innerHTML = data4;
                             document.getElementById("d8").onclick = function () {
                                 window.open("http://btjczhxf.top/2F");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d8");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("3号廊桥喷淋压力异常！");
                             }

                         }
                     });
                     //10号廊桥
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data4,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)

                             var data5 = "10号廊桥喷淋压力:" + val + "Mpa";
                             document.getElementById("d9").innerHTML = data5;
                             document.getElementById("d9").onclick = function () {
                                 window.open("http://btjczhxf.top/2F");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d9");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("10号廊桥喷淋水压异常！");
                             }

                         }
                     });
                     //风向
                     jQuery.ajax({

                         type: "GET",

                         url: "http://wthrcdn.etouch.cn/weather_mini?citykey=101080201",

                         success: function (res) {

                             console.log(res)
                             console.log(res);
                             var o1 = new Array();
                             o1 = res.indexOf('fengxiang');
                             console.log(o1);

                             //console.log(lo);
                             var stringResult = res.split(',');
                             console.log(stringResult);
                             console.log(stringResult[11]);
                             var o2 = stringResult[11];
                             console.log(o2[1]);
                             var a = o2;

                             console.log(a[1]);
                             var b = "";
                             for (var i = 0; i < a.length; i++) {
                                 if (a.charCodeAt(i) > 256 && a[i] != " ") {
                                     b += a[i];
                                 } else {
                                     continue;
                                 }
                             }
                             console.log(b);  //"你们还是
                             //console.log(res[o1+12]);
                             var val = [];
                             var fengxiang = "风向:" + b;
                             document.getElementById("d11").innerHTML = fengxiang;
                             //$.each(res.data, function (i, item) {
                             // val.push(item.logicaddr + '');

                             //);
                             // console.log(unique(val))

                         }, error: function (error) {



                         }

                     });
                     //清洁间喷淋
                 jQuery.ajax({
                        url: "http://0125.net.cn:5000/api",
                        type: 'POST',
                        data: data6,
                        success: function (msg) {
                        console.log(msg);
                        var val = [];
                        jQuery.each(msg.data, function (i, item) {
                        val.push(item.zong + '');
                        });
                        console.log(val);
                        val = val.slice(-1);
                        console.log(val);
                        var data6 = "清洁间喷淋压力:" + val + "Mpa";
                            document.getElementById("d12").innerHTML = data6;
                            document.getElementById("d12").onclick = function () {
                                window.open("http://btjczhxf.top/1F");
                            };
                        if (val < 0.13) {
                        var color = document.getElementById("d12");//颜色判断
                        color.style.color = "red";//颜色判断
                        alert("清洁间喷淋压力异常！");
                        }
                        }
                 });
                     //贵宾喷淋压
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data7,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)


                             var data3 = "贵宾喷淋泵压力:" + val + "Mpa";
                             document.getElementById("d13").innerHTML = data3;
                             document.getElementById("d13").onclick = function () {
                                 window.open("http://btjczhxf.top/1F");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d13");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("贵宾喷淋泵压力异常！");
                             }

                         }
                     });
                     //1层无障碍喷淋压
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data5,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)


                             var data3 = "一层无障碍卫生间喷淋压力:" + val + "Mpa";
                             document.getElementById("d14").innerHTML = data3;
                             document.getElementById("d14").onclick = function () {
                                 window.open("http://btjczhxf.top/1F");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d14");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("一层无障碍卫生间喷淋压力异常！");
                             }

                         }
                     });
                     //2层消防栓
                     jQuery.ajax({
                         url: "http://0125.net.cn:5000/api",
                         type: 'POST',
                         data: data8,
                         success: function (msg) {
                             console.log(msg);
                             // for (var p in msg.data) {
                             //    var lo =[];
                             //  return lo.push(msg.data[p].logicaddr);
                             //   console.log(msg.data[p].logicaddr + " " +  msg.data[p].zong);
                             // }
                             //console.log(lo);
                             //console.log(val);
                             // msg.splice(msg.length - 7, msg.length - 1);
                             //console.log(msg);
                             var val = [];
                             jQuery.each(msg.data, function (i, item) {
                                 val.push(item.zong + '');

                             });
                             console.log(val);
                             //console.log(unique(val));
                             val = val.slice(-1);
                             console.log(val);

                             // console.log(val)
                             // msg.splice(msg.length - 7, msg.length - 1)
                             // console.log(msg)


                             var data3 = "二层消防栓压力:" + val + "Mpa";
                             document.getElementById("d15").innerHTML = data3
                             document.getElementById("d15").onclick = function () {
                                 window.open("http://btjczhxf.top/2F");
                             };
                             if (val < 0.13) {
                                 var color = document.getElementById("d15");//颜色判断
                                 color.style.color = "red";//颜色判断
                                 alert("二层消防栓压力异常！");
                             }

                         }
                     });

             
                     function unique(arr) {
                         return arr.filter(function (item, index, arr) {
                             //当前元素，在原始数组中的第一个索引==当前索引值，否则返回当前元素
                             return arr.indexOf(item, 0) === index;
                         });
                     }
                     var d = new Date();
                     var year = d.getFullYear();
                     var month = d.getMonth() + 1; // 记得当前月是要+1的
                     var dt = d.getDate();
                     var today = year + "年" + month + "月" + dt + "日";
                     console.log(today);
                     document.getElementById("d1").innerHTML = today;
                     var xingqi = "星期" + "日一二三四五六".charAt(new Date().getDay());
                     console.log(xingqi);
                     document.getElementById("d2").innerHTML = xingqi;
                 </script>
             </div>
         </div></body>
</html>